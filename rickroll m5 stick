#include <M5StickC.h>        // Use M5StickCPlus.h if you have Plus
#include <WiFi.h>
#include <WebServer.h>

const char* ssid = "Free_WiFi";  // Fake WiFi name

WebServer server(80);

// Rickroll URL
const char* rickrollURL = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";

void handleRedirect() {
  server.sendHeader("Location", rickrollURL, true);
  server.send(302, "text/plain", "");
}

void setup() {
  M5.begin();
  Serial.begin(115200);

  WiFi.mode(WIFI_AP);
  WiFi.softAP(ssid);

  delay(100); // Important for stability

  server.on("/", handleRedirect);
  server.onNotFound(handleRedirect);
  server.begin();

  Serial.println("Rickroll AP started!");
  Serial.print("AP IP address: ");
  Serial.println(WiFi.softAPIP());

  // Display on screen

